(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{427:function(e,t,n){Promise.resolve().then(n.bind(n,1291))},3568:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});let a=e=>new Date(e).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo"})},1291:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(7437),r=n(9222),o=n(2265),s=n(3568),l=e=>{let{options:t,value:n,onChange:r}=e,[l,c]=(0,o.useState)(!1),[i,u]=(0,o.useState)(-1),d=(0,o.useRef)(),m=e=>{r(e),c(!1)},p=e=>{r(e),u(-1),l||c(!0)},x=t.filter(e=>e.ipaddress.includes(n)),b=()=>{i<x.length-1&&u(e=>e+1)},h=()=>{i>0&&u(e=>e-1)};return(0,o.useEffect)(()=>{let e=e=>{d.current.contains(e.target)||(c(!1),u(-1))};return document.addEventListener("click",e),document.addEventListener("focusin",e),()=>{document.removeEventListener("click",e),document.removeEventListener("focusin",e)}},[]),(0,a.jsxs)("div",{className:"relative w-full",ref:d,children:["Pesquisa de Server",(0,a.jsx)("input",{type:"text",id:"server",name:"server",className:"w-full px-5 py-3 text-gray-700 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-blue-600",value:n.ipaddress,onChange:e=>p(e.target.value),onFocus:()=>c(!0),onKeyDown:e=>{switch(e.key){case"ArrowUp":h();break;case"ArrowDown":b();break;case"Enter":i>=0&&i<x.length&&m(x[i])}},placeholder:"127.0.0.1"}),(0,a.jsx)("ul",{className:"absolute w-full rounded-lg shadow-lg ".concat(!l&&"hidden"," select-none"),children:x.length>0?x.map((e,t,n)=>{let r="px-4 text-black bg-white ";return 0===t?r+="pt-2 pb-1 rounded-t-lg":t===n.length?r+="pt-1 pb-2 rounded-b-lg":0===t&&1===n.length?r+="py-2 rounded-lg":r+="py-1",i===t&&(r+=" bg-gray-100"),(0,a.jsxs)("li",{className:r,onClick:()=>m(e),children:[" ",(0,a.jsx)("hr",{})," ","".concat(e.ipaddress),(0,a.jsx)("br",{}),"".concat(e.name),(0,a.jsx)("br",{}),"".concat((0,s.M)(e.datetime))]},e.ipaddress)}):(0,a.jsx)("li",{className:"px-4 py-2 text-black bg-white",children:"No results"})})]})},c=n(2601);function i(){let[e,t]=(0,o.useState)("\n    \n    VirtualHost *:80>\n    DocumentRoot /var/www/example\n    <Directory /var/www/example>\n            DirectoryIndex index.html\n            #Options Indexes FollowSymLinks\n            #AllowOverride None\n            #Require all granted\n    </Directory>\n    # Static files in the examples webapp are served by Apache\n    # Alias /examples /opt/tomcat/webapps/example\n    # All requests go to ajp13_worker by default\n    JkMount /* ajp13_worker\n    # Serve this files using Apache\n    JkUnMount /*.html ajp13_worker\n    JkUnMount /*.jpg ajp13_worker\n    JkUnMount /*.gif ajp13_worker\n    JkUnMount /*.png ajp13_worker\n    JkUnMount /*.svg ajp13_worker\n    JkUnMount /*.js ajp13_worker\n    JkUnMount /*.css ajp13_worker\n\n    ServerAdmin info@example\n\n    ErrorLog /error.log\n    CustomLog /access.log combined\n\n</VirtualHost>"),[n,s]=(0,o.useState)([]),[i,u]=(0,o.useState)("");(0,o.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await r.Z.get("".concat(c.env.NEXT_PUBLIC_URL_DEFAULT,"/api/history/"));s(e.data)}catch(e){alert("Arquivo n\xe3o encontrado")}},m=async e=>{e.preventDefault();try{let e=await r.Z.get("".concat(c.env.NEXT_PUBLIC_URL_DEFAULT,"/api/Files/viewfile/").concat(i.id)),n=e.data.data;t(n)}catch(e){alert("Arquivo n\xe3o encontrado")}},p=async e=>{e.preventDefault();try{let e=await r.Z.get("".concat(c.env.NEXT_PUBLIC_URL_DEFAULT,"/api/actions/"));200===e.status&&(alert("Backup realizado com sucesso!\nSucesso: "+e.data.success+"\nFalhou : "+e.data.faleid),d())}catch(e){alert("Arquivo n\xe3o encontrado")}},x=async e=>{if(e.preventDefault(),""===i){alert("Selecione Servidor");return}try{let e=await r.Z.get("".concat(c.env.NEXT_PUBLIC_URL_DEFAULT,"/api/actions/").concat(i.fileId));200===e.status&&(alert("Backup realizado com sucesso!\nSucesso: "+e.data.success+"\nFalhou : "+e.data.faleid),d())}catch(e){alert("Arquivo Servidor Falhou")}},b=async e=>{if(e.preventDefault(),""===i){alert("Selecione um arquivo");return}try{let e=await r.Z.get("".concat(c.env.NEXT_PUBLIC_URL_DEFAULT,"/api/Files/download/").concat(i.backupname),{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","".concat(i.backupname)),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)}catch(e){alert("Arquivo n\xe3o encontrado")}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("main",{className:"flex flex-wrap justify-between text-center align-middle pt-5 w-full mb-2 ",children:[(0,a.jsxs)("div",{className:"w-1/2 sm:w-full",children:[(0,a.jsx)("h1",{className:"text-orange-500 font-bold text-xl text-center ",children:"Arquivos para Visualizar "}),(0,a.jsxs)("form",{onSubmit:e=>m(e),children:[n.length>0&&(0,a.jsx)(l,{options:n,value:i,onChange:u}),(0,a.jsx)("button",{onSubmit:!0,className:"bottom-2 text-white p-2 bg-green-800 m-3 rounded-md",children:" Buscar "}),(0,a.jsx)("button",{onClick:e=>b(e),className:"bottom-2 text-white p-2 bg-green-800 m-3 rounded-md",children:" Download "}),(0,a.jsx)("button",{onClick:e=>x(e),className:"bottom-2 text-white p-2 bg-green-800 m-3 rounded-md",children:" Buscar Agora "})]})]}),(0,a.jsxs)("div",{className:"w-1/2 sm:w-full",children:[(0,a.jsx)("h1",{className:"text-orange-500 font-bold text-xl text-center ",children:"Controle "}),(0,a.jsx)("button",{className:"bg-orange-400 rounded-sm p-2 m-1",onClick:e=>p(e),children:" Buscar todos os Arquivos "}),(0,a.jsx)("br",{}),(0,a.jsx)("hr",{className:"w-10/12 mx-auto"}),(0,a.jsx)("button",{onAbort:!0,className:"bg-orange-400 rounded-sm p-2 m-1",children:" Limpar "}),(0,a.jsx)("button",{onAbort:!0,className:"bg-orange-400 rounded-sm p-2 m-1",children:" Error Semana "})]}),(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("h1",{className:"text-orange-500 font-bold text-xl  ",children:"Conteudo do Arquivos "}),(0,a.jsxs)("pre",{className:" text-left border-2 bg-gray-800 rounded-md overflow-auto scroll-mx-20",children:[(0,a.jsx)("br",{}),e,(0,a.jsx)("br",{})]})]})]})})}}},function(e){e.O(0,[906,971,596,744],function(){return e(e.s=427)}),_N_E=e.O()}]);